<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>anttask - Yeti API documentation </title>
    <style type="text/css">

    body{
         font-family: "Lucida Grande","Trebuchet MS","Bitstream Vera Sans",Verdana,Helvetica,sans-serif;font-size: 14px;
         line-height: 18px;
    }

    h4 {
        margin: 0;
    }

    p {
        margin-top: 3px;
    }

    ul {
        list-style: none;
        margin: 0;
        padding:0;
    }

    body{
        margin:0;
        padding:0;
        line-height: 1.5em;
    }

    b{font-size: 110%;}
    em{color: red;}
    .var-marker {font-size: 80%; color: #666;}
    .struct-marker {font-size: 60%; color: #666;}

    pre.doc {
         font-family: "Lucida Grande","Trebuchet MS","Bitstream Vera Sans",Verdana,Helvetica,sans-serif;font-size: 14px;
         line-height: 18px;
    }

    pre.type {
        white-space: pre-wrap;
        white-space: -moz-pre-wrap;
        white-space: -o-pre-wrap;
        background: #faf8f0;
    }

    code {
        display: block;
        padding: 0.5em 1em;
        border: 1px solid #bebab0;
    }
    div.codeheader {
        margin-bottom: 0;
        padding-bottom: 0;
    }
    pre.codeheader {
        margin-top: 3px;
    }

    #topsection{
        background: #EAEAEA;
        height: 90px; /*Height of top section*/
    }

    #topsection h1{
        margin: 0;
        padding-top: 15px;
    }

    #contentwrapper{
        float: left;
        width: 100%;
    }

    #contentcolumn{
        margin-left: 200px; /*Set left margin to LeftColumnWidth*/
        border-left: 5px solid  #EAEAEA;
    }

    #leftcolumn{
        float: left;
        width: 200px; /*Width of left column*/
        margin-left: -100%;
        margin-top: 15px;
        
        /*background: #C8FC98;*/
    }

    #footer{
        clear: left;
        width: 100%;
        background: black;
        color: #FFF;
        text-align: center;
        padding: 4px 0;
    }

    #footer a{
        color: #FFFF80;
    }

    .innertube{
        margin: 10px; /*Margins for inner DIV inside each column (to provide padding)*/
        margin-top: 0;
    }

    </style>


</head>
<body>
<div id="maincontainer">
    <div id="topsection"><div class="innertube">
        <h1>Yeti API documentation </h1>
        <h2>anttask</h2>
    </div></div>

    <div id="contentwrapper"><div id="contentcolumn"><div class="innertube">
                <h1>std<span class="struct-marker"> is structure</span> </h1>
        <a href="#source">sourcecode</a>
        <h2>Overview</h2>
        <pre class="doc"></pre>
       <h4>All Fields</h4>
        <p><a href="#field_$">$</a>, <a href="#field_&#38;&#62;&#62;">&#38;&#62;&#62;</a>, <a href="#field_&#62;&#62;">&#62;&#62;</a>, <a href="#field_andThen">andThen</a>, <a href="#field_andThenEither">andThenEither</a>, <a href="#field_atOpt">atOpt</a>, <a href="#field_either">either</a>, <a href="#field_ensure">ensure</a>, <a href="#field_ensureRight">ensureRight</a>, <a href="#field_ensureSome">ensureSome</a>, <a href="#field_headOpt">headOpt</a>, <a href="#field_keyMsg">keyMsg</a>, <a href="#field_lazyMapJavaList">lazyMapJavaList</a>, <a href="#field_lazyMaybe">lazyMaybe</a>, <a href="#field_leftMsg">leftMsg</a>, <a href="#field_leftTxtMsg">leftTxtMsg</a>, <a href="#field_listStarts?">listStarts?</a>, <a href="#field_map2index">map2index</a>, <a href="#field_mapJavaList">mapJavaList</a>, <a href="#field_require">require</a>, <a href="#field_requireRight">requireRight</a>, <a href="#field_some">some</a>, <a href="#field_toCallable">toCallable</a>, <a href="#field_toUnit">toUnit</a>, <a href="#field_txtMsg">txtMsg</a></p>

        <h2>Field details</h2><hr/>        <h3><a name="field_$">$</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>$ is 'a -&#62; ('a -&#62; 'b) -&#62; 'b</code></pre>
        <hr/>
        <h3><a name="field_&#38;&#62;&#62;">&#38;&#62;&#62;</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>&#38;&#62;&#62; is ('a -&#62; Left 'b | Right 'c) -&#62; ('c -&#62; (Left 'b | Right 'd is 'e)) -&#62; 'a -&#62; 'e</code></pre>
        <hr/>
        <h3><a name="field_&#62;&#62;">&#62;&#62;</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>&#62;&#62; is ('a -&#62; 'b) -&#62; ('b -&#62; 'c) -&#62; 'a -&#62; 'c</code></pre>
        <hr/>
        <h3><a name="field_andThen">andThen</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>andThen is ('a -&#62; 'b) -&#62; ('b -&#62; 'c) -&#62; 'a -&#62; 'c</code></pre>
        <hr/>
        <h3><a name="field_andThenEither">andThenEither</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>andThenEither is ('a -&#62; Left 'b | Right 'c) -&#62; ('c -&#62; (Left 'b | Right 'd is 'e)) -&#62; 'a -&#62; 'e</code></pre>
        <hr/>
        <h3><a name="field_atOpt">atOpt</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>atOpt is 'a -&#62; map&#60;'a, 'b&#62; -&#62; None () | Some 'b</code></pre>
        <hr/>
        <h3><a name="field_either">either</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>either is ('a -&#62; 'b) -&#62; ('c -&#62; 'b) -&#62; Left 'a | Right 'c -&#62; 'b</code></pre>
        <hr/>
        <h3><a name="field_ensure">ensure</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>ensure is 'a -&#62; boolean -&#62; ()</code></pre>
        <hr/>
        <h3><a name="field_ensureRight">ensureRight</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>ensureRight is Left 'a | Right 'b -&#62; 'b</code></pre>
        <hr/>
        <h3><a name="field_ensureSome">ensureSome</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>ensureSome is None 'a | Some 'b -&#62; 'b</code></pre>
        <hr/>
        <h3><a name="field_headOpt">headOpt</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>headOpt is list?&#60;'a&#62; -&#62; None () | Some 'a</code></pre>
        <hr/>
        <h3><a name="field_keyMsg">keyMsg</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>keyMsg is 'a -&#62; 'b -&#62; 'c -&#62; {
   args is 'c,
   default is 'b,
   key is 'a
}</code></pre>
        <hr/>
        <h3><a name="field_lazyMapJavaList">lazyMapJavaList</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>lazyMapJavaList is (~java.lang.Object -&#62; 'a) -&#62; ~java.util.List -&#62; list&#60;'a&#62;</code></pre>
        <hr/>
        <h3><a name="field_lazyMaybe">lazyMaybe</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>lazyMaybe is (() -&#62; 'a) -&#62; ('b -&#62; 'a) -&#62; None 'c | Some 'b -&#62; 'a</code></pre>
        <hr/>
        <h3><a name="field_leftMsg">leftMsg</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>leftMsg is ({.default is string} is 'a) -&#62; Left list&#60;'a&#62;</code></pre>
        <hr/>
        <h3><a name="field_leftTxtMsg">leftTxtMsg</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>leftTxtMsg is string -&#62; Left list&#60;{`default is string}&#62;</code></pre>
        <hr/>
        <h3><a name="field_listStarts?">listStarts?</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>listStarts? is list&#60;'a&#62; -&#62; list&#60;'a&#62; -&#62; boolean</code></pre>
        <hr/>
        <h3><a name="field_map2index">map2index</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>map2index is list&#60;'a&#62; -&#62; list&#60;{fst is number, snd is 'a}&#62;</code></pre>
        <hr/>
        <h3><a name="field_mapJavaList">mapJavaList</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>mapJavaList is (~java.lang.Object -&#62; 'a) -&#62; ~java.util.List -&#62; list&#60;'a&#62;</code></pre>
        <hr/>
        <h3><a name="field_require">require</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>require is 'a -&#62; boolean -&#62; ()</code></pre>
        <hr/>
        <h3><a name="field_requireRight">requireRight</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>requireRight is 'a -&#62; Left 'b | Right 'c -&#62; 'c</code></pre>
        <hr/>
        <h3><a name="field_some">some</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>some is 'a -&#62; None () | Some 'a</code></pre>
        <hr/>
        <h3><a name="field_toCallable">toCallable</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>toCallable is (() -&#62; 'a) -&#62; ~std$RunCallable</code></pre>
        <hr/>
        <h3><a name="field_toUnit">toUnit</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>toUnit is 'a -&#62; ()</code></pre>
        <hr/>
        <h3><a name="field_txtMsg">txtMsg</a></h3>
        <pre class="doc"></pre>
        <!--<div class="codeheader">field-type:</div>-->
        <pre class="type"><code>txtMsg is string -&#62; {`default is string}</code></pre>
        <hr/>

        <h2><a name="source">Source</a></h2>
        <pre class="type"><code>module std;

import org.yeticl.map.TMap;
//import org.slf4j: Logger, LoggerFactory;
import java.util: List,ListIterator;
import yeti.lang.Struct;


typedef keyMsgType = {.key is string,
                      .default is string,
                      .args is ~java.util.List[]}

typedef msgType ={.default is string};

txtMsg default is string -&#62; {.default is string} =
     {default};

leftMsg msg is msgType -&#62; Left list&#60;msgType&#62; =  Left [msg];

leftTxtMsg default is string -&#62; Left list&#60;msgType&#62; = leftMsg (txtMsg default);

keyMsg key default args =
   {key,default,args};

mapJavaList mapF javaList is (~Object -&#62; 'a) -&#62; ~List -&#62; list&#60;'a&#62; = (
    var li = [];
    it = javaList#listIterator(javaList#size());
    (it#hasPrevious()) loop (
        el = mapF it#previous();
        li := el :: li;
    );
    li
);

lazyMapJavaList mapF javaList is (~Object -&#62; 'a) -&#62; ~List -&#62; list&#60;'a&#62; = (
    itf it is ~java.util.Iterator -&#62; list&#60;'a&#62; =
        if it#hasNext() then
            e = mapF it#next();
            e :: itf it;
        else
            []
        fi;
    itf javaList#iterator();
);

toCallable f = (
    class RunCallable extends java.lang.Runnable, java.util.concurrent.Callable
        void run()
            x = f ();
            (),
        Object call()
            r = f();
            r unsafely_as ~Object,
    end;
    new RunCallable();
);

//getLogger name is string -&#62; ~Logger = LoggerFactory#getLogger(name);

andThen f g = do x: g(f x) done;

andThenEither f g is ('a-&#62; (Left 'm | Right 'b)) -&#62; ('b-&#62; (Left 'm | Right 'c)) -&#62;  ('a-&#62; (Left 'm | Right 'c)) =
    do a:
        case f a of
          Left m: Left m;
          Right b:
            g b;
        esac
    done;

toUnit = do _: () done;

headOpt li =
    if empty? li then None () else Some(head li) fi;

atOpt k hs =
    if k in hs then Some (hs.[k]) else none fi;

listStarts? start l =
    if empty? start then
        true
    elif empty? l then
        false
    elif (head start) != (head l) then
        false
    else
        listStarts? (tail start) (tail l)
    fi;

either leftF rightF leftOrRight =
    case leftOrRight of
      Left v: leftF v;
      Right x: rightF x;
    esac;

lazyMaybe default fun opt =
    case opt of
        None _: default ();
        Some v: fun v;
    esac;

some v is 'a -&#62; (Some 'a | None () )= Some v;

map2index list = (
    f i l =
        if empty? l then
            []
        else
            (pair i (head l)) :. \(f (i+1) (tail l));
        fi;
     f 0 list;
);

require msg cond =
  if not cond then
    throw new java.lang.IllegalArgumentException(&#34;\(msg)&#34;);
  fi;

ensure msg cond =
  if not cond then
    throw new java.lang.IllegalStateException(&#34;\(msg)&#34;);
  fi;

ensureRight leftOrRight =
    either do m: throw new java.lang.IllegalStateException(&#34;\(m)&#34;) done id leftOrRight;

requireRight msg leftOrRight =
    either do m: throw new java.lang.IllegalArgumentException(&#34;\(msg)\(m)&#34;) done id leftOrRight;

ensureSome noneOrSome =
    case noneOrSome of
        None _ : throw new java.lang.IllegalStateException(&#34;None value but value needed&#34;);
        Some v : v;
    esac;






{
    ($) x y = y x,
    (&#62;&#62;) f g = andThen f g,
    (&#38;&#62;&#62;) f1 f2 = andThenEither f1 f2,

    txtMsg,
    leftMsg,
    leftTxtMsg,
    keyMsg,

    mapJavaList,
    lazyMapJavaList,
    toUnit, 
    //getLogger,
    andThen,
    andThenEither,
    headOpt,
    atOpt,
    either,
    lazyMaybe,
    some,
    map2index,
    require,
    ensure,
    ensureRight,
    requireRight,
    ensureSome,
    listStarts?,
    toCallable,

}</code></pre>

    </div></div></div>

    <div id="leftcolumn"><div class="innertube">
        <!--<b>Left Column: <em>200px</em></b> <script type="text/javascript">filltext(15)</script> -->
               <h4>modules</h4>
        <ul><li><a href="yeti$lang$std.html">yeti.lang.std</a></li>
             <li><a href="yeti$lang$compiler$repl.html">yeti.lang.compiler.repl</a></li>
             <li><a href="yeti$http.html">yeti.http</a></li>
             <li><a href="std.html">std</a></li>
             <li><a href="some1.html">some1</a></li>
             <li><a href="some.html">some</a></li></ul>

    </div></div>

    <div id="footer">
        <a href="http://mth.github.com/yeti/">Yeti - home</a>
    </div>
</div>
</body>
</html>
